# SI330-Final-Project
Final Project for SI 330
SI 330 Final Project Report
Brandon Huggard, BSI 2023
https://github.com/bhuggard/SI330-Final-Project

Data Sources:
	https://www.kaggle.com/datasets/stefanoleone992/fifa-22-complete-player-dataset (Kaggle Data Sourced From: https://sofifa.com/ ) FIFA22 Career Mode Database
	https://data.world/dcereijo/player-scores Real Life Transfer Market Valuations as Scraped from TransferMarkt and implemented from data.world into my Notebook

Both Sources read a .csv file implemented into a Pandas Dataframe.

Regarding the FIFA22 Career Mode dataset; the most important variables I used included FIFA22 Rating (0-99) and FIFA22 Price Valuation (converted to fifa_value_usd in the code). There were several other important variables including things like height, weight, dominant foot, etc. but for the sake of my project most of these were either removed in cleaning or overlapped with the other dataset. The initial scraped set covered every player all the way back through FIFA15 meaning there were hundreds of thousands of individual records, whittled down to just FIFA22 with select variables. The time period used is from August (release of FIFA22) to the present.
Regarding the Real Life Transfer Market Valuation dataset; the most important variable was, as expected, the TransferMarkt player valuation to be compared with the FIFA22 dataset. Variables such as team, league, and age were also included as they are provided alongside the same data on the website the data was gathered from and placed on Kaggle (https://www.transfermarkt.us/). The time period is as far back as each player has been playing and in Transfer Markt’s database as the source updates every few days accordingly.

Motivation:
As someone aspiring to break into the sports analytics industry following my graduation from UMSI, pairing a sport that I’ve just recently started making an effort to watch in Soccer, with its sister title from EA Sports (whose games I confess to spending a fair amount of both time and money on) regarding the most important part of roster building and player movement between the two was of peak interest to me personally. Specifically, I aimed to address any geographic bias using basic business intelligence tools in Tableau like mapping and positional bar charts. Furthermore I wanted to see if there was any way to predict a player’s FIFA22 Career Mode price based on things like age, real life transfer market valuation, and FIFA22 Player rating. This was accomplished using more advanced methods and multivariate techniques in Python with plotting done in matplotlib as an expansion in what we covered in class to allow for three dimensional visualization.

Data Manipulation Methods:
Initially, both datasets contained much more than I needed to work with. I was overwhelmed trying to make heads or tails of either set and began with shrinking the FIFA database down to just FIFA22, then once I wasn’t breaking my laptop every time I opened it I was able to shave off unnecessary columns like in-game attributes, some physical traits, and any columns that overlapped with the real life data frame with the exception of name, which is what I joined the two datasets on. Regarding the real life dataset, there were many things like “player id”, “nation_id” and “nation of birth” which only confused things with variables like “national team”  that I needed to remove before joining the two tables. Regarding missing and overlapped data that created incorrect or “imposter” rows as I referred to them in the notebook; I was able to identify them using names that appeared more than once and didn’t appear as terribly common. Specifically; players from Spain, Portugal, and Brazil seemed to have the most catches that needed to be resolved. All but one portion of the processing to get the data to a state where it was ready to be merged was done in Python using the pandas library using basic .drop or basic renaming methods to get columns into a more readable state. I joined my datasets on player names as it would ensure there were no more than one or two overlaps which would be easily identifiable using things like the value count method in pandas. The issues came when examining how each dataset used player names. The TransferMarkt dataset used a basic first name-last name approach whereas FIFA22 included players middle names, preferred names, and several dashes and apostrophes not otherwise found in the other dataset. Using the integrated function for mapping column patterns in Excel I was able to use the better name format from the original dataset on about 15 players manually in a new column adjacent to names in the FIFA22 set and it automatically populated the rest using the same format with only a few obvious errors, again fixed in pandas as seen in the notebook. The final goal was to use the top 350 players based on real life transfer valuation but after a few errors and NAN values I ended up with 340 of the initial goal of 350, with no global superstars (Messi, Ronaldo, Mbappe) missing. My source code is broken into 2 major parts: tableau prep and analysis- both portions needed their respective currencies converted to USD with FIFA prices to be converted from GPB and the TransferMarkt dataset being converted from EUR. The first half or so of the notebook exists only to clean and prepare the merged datasets for Tableau where I split up players based on country and comparative pricing based on FIFA22 or TransferMarkt lines. By far and away the largest challenge was normalizing the names to give me something to join the two datasets together as it forced me to do some research and heavier lifting in Excel, an environment I am not as comfortable in as something like an ipynb or even a Tableau workbook, which may seem surprising but I’ve never done much beyond downloading the csv and cleaning it elsewhere with Excel.

Analysis and Visualization:
My first goal in combining the two datasets was to find any geographical bias in either FIFA22 Career Mode Prices or Real Life Transfer Market Valuations when stacked against one another. Given that my aim was to compare the two sets directly against each other I couldn’t have done it with just one set alone. Beginning with cleaning and merging the datasets, I then wrote my new dataframe to an entirely separate csv and exported it to Tableau, where I was able to create maps by country with varying shades of one color to determine how overrated or underrated a player’s FIFA/Real life valuation was with respect to the other. Beyond that I grouped players by broad position (GK, Defense, Midfield, Attack) and found any price bias there, with Goalkeepers having the biggest discrepancy of any position group between FIFA22 and Real Life price valuations. My second goal was to create a model that predicted FIFA22 prices based on several existing variables in the merged dataset. Using age, real life price valuation, and FIFA22 Rating, I was able to create a model that accounted for 89.7% of the variance in FIFA22 Price valuations. The analysis was performed using the sklearn library’s linear model feature with some more advanced three dimensional visualizations done using the mpl_toolkit library and its Axes3D feature. I found that in determining the price of a FIFA22 player, FIFA rating and real life valuations both had pretty noticeable correlations on just the graph with age containing a few wild outliers in the 3d representations, likely being players like Kylian Mbappe and Erling Haaland. Regarding things I tried that did not work; using all of the independent variables on one plot set against FIFA22 career mode price didn’t work because I quickly realized that I would need a 4th dimension, which- to my knowledge- isn’t achievable. Additionally, I had trouble finding ways to format such large numbers on the graph axes without making it look too close together and unreadable. I solved this using both tick and label padding with only FIFA22 Rating having some excess visual noise. The base angle for 3D plots is what is given but if there is any desire to explore different viewpoints on the 3d charts the commented line can be used to adjust that in the format provided.
